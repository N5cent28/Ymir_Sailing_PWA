/* empty css                                              */
import { c as createComponent, g as renderComponent, f as renderTemplate, m as maybeRenderHead, e as renderScript, b as addAttribute } from '../../chunks/astro/server_C3Y6NmiR.mjs';
import 'kleur/colors';
import { $ as $$Layout } from '../../chunks/Layout_DUjiRZkg.mjs';
import { $ as $$Navigation } from '../../chunks/Navigation_C6PXT241.mjs';
import { getBoatStatus, getActiveCheckIns, getOverdueBoats, getRecentNotifications, getAllMembers } from '../../chunks/database-postgres_A4NcQA_p.mjs';
export { renderers } from '../../renderers.mjs';

const $$AdminDashboard = createComponent(async ($$result, $$props, $$slots) => {
  const boats = [
    { id: "boat-1", name: "Quest 1" },
    { id: "boat-2", name: "Quest 2" },
    { id: "boat-3", name: "Zest 1" },
    { id: "boat-4", name: "Zest 2" },
    { id: "boat-5", name: "Zest 3" },
    { id: "boat-6", name: "Zest 4" },
    { id: "boat-7", name: "Zest 5" },
    { id: "boat-8", name: "Zest 6" },
    { id: "boat-9", name: "Topaz 1" },
    { id: "boat-10", name: "Topaz 2" },
    { id: "boat-11", name: "Laser 1" },
    { id: "boat-12", name: "Laser 2" },
    { id: "boat-13", name: "Laser 3" },
    { id: "boat-14", name: "Laser 4" },
    { id: "kayak", name: "Kayak" },
    { id: "paddle-board", name: "Paddle Board" }
  ];
  const boatStatuses = await Promise.all(boats.map(async (boat) => {
    const status = await getBoatStatus(boat.id);
    const activeCheckIns2 = await getActiveCheckIns(boat.id);
    return { ...boat, ...status, activeCheckIns: activeCheckIns2 };
  }));
  const overdueBoats = await getOverdueBoats();
  const notifications = await getRecentNotifications(20);
  const members = await getAllMembers();
  const totalBoats = boats.length;
  boatStatuses.filter((b) => b.status === "operational").length;
  const activeCheckIns = boatStatuses.reduce((total, boat) => total + boat.activeCheckIns.length, 0);
  const maintenanceBoats = boatStatuses.filter((b) => b.status === "maintenance").length;
  const outOfServiceBoats = boatStatuses.filter((b) => b.status === "out_of_service").length;
  return renderTemplate`${renderComponent($$result, "Layout", $$Layout, { "title": "Admin Dashboard - Ymir Sailing Club", "lang": "en" }, { "default": async ($$result2) => renderTemplate` ${renderComponent($$result2, "Navigation", $$Navigation, {})} ${maybeRenderHead()}<main> <!-- Hero Section --> <section class="bg-gradient-to-br from-ocean-green to-green-600 text-white py-20"> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center"> <div class="flex justify-between items-center mb-6"> <div></div> <h1 class="text-5xl font-bold">
Admin Dashboard
</h1> <div class="admin-info flex items-center space-x-4"> <span class="text-sm">Logged in as Admin</span> <a href="/en/admin-login" class="px-4 py-2 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-colors text-sm">
Logout
</a> </div> </div> <p class="text-xl mb-8 max-w-3xl mx-auto">
Monitor club activity, manage boats, and track member engagement.
</p> </div> </section> <!-- Dashboard Content --> <section class="py-16 bg-white"> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"> <!-- Quick Stats --> <div class="grid md:grid-cols-3 gap-6 mb-8"> <div class="bg-white rounded-lg shadow-lg p-6 border-l-4 border-blue-500"> <div class="flex items-center"> <div class="flex-1"> <p class="text-sm font-medium text-gray-600">Total Boats</p> <p class="text-2xl font-bold text-gray-900">${totalBoats}</p> </div> <div class="text-blue-500"> <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path> </svg> </div> </div> </div> <div class="bg-white rounded-lg shadow-lg p-6 border-l-4 border-orange-500"> <div class="flex items-center"> <div class="flex-1"> <p class="text-sm font-medium text-gray-600">On the Water</p> <p class="text-2xl font-bold text-gray-900">${activeCheckIns}</p> </div> <div class="text-orange-500"> <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path> </svg> </div> </div> </div> <div class="bg-white rounded-lg shadow-lg p-6 border-l-4 border-purple-500"> <div class="flex items-center"> <div class="flex-1"> <p class="text-sm font-medium text-gray-600">Members</p> <p class="text-2xl font-bold text-gray-900">${members.length}</p> </div> <div class="text-purple-500"> <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path> </svg> </div> </div> </div> </div> <!-- Quick Actions --> <div class="bg-white rounded-lg shadow-lg p-6 mb-8"> <h3 class="text-xl font-bold text-ocean-green mb-6">Quick Actions</h3> <div class="grid md:grid-cols-3 gap-4"> <a href="/en/members" class="flex items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors"> <div class="text-blue-500 mr-4"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path> </svg> </div> <div> <h4 class="font-semibold text-gray-900">Edit Members</h4> <p class="text-sm text-gray-600">Manage club members and view PINs</p> </div> </a> <a href="/en/admin" class="flex items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors"> <div class="text-green-500 mr-4"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path> </svg> </div> <div> <h4 class="font-semibold text-gray-900">Manage Boats</h4> <p class="text-sm text-gray-600">Update boat status and settings</p> </div> </a> <a href="/en/admin-maintenance" class="flex items-center p-4 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"> <div class="text-red-500 mr-4"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path> </svg> </div> <div> <h4 class="font-semibold text-gray-900">Maintenance</h4> <p class="text-sm text-gray-600">Track and manage boat issues</p> </div> </a> <a href="/en/admin-qr-codes" class="flex items-center p-4 bg-yellow-50 rounded-lg hover:bg-yellow-100 transition-colors"> <div class="text-yellow-500 mr-4"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V6a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1zm12 0h2a1 1 0 001-1V6a1 1 0 00-1-1h-2a1 1 0 00-1 1v1a1 1 0 001 1zM5 20h2a1 1 0 001-1v-1a1 1 0 00-1-1H5a1 1 0 00-1 1v1a1 1 0 001 1z"></path> </svg> </div> <div> <h4 class="font-semibold text-gray-900">Manage QR Codes</h4> <p class="text-sm text-gray-600">Upload and manage boat QR codes</p> </div> </a> </div> <!-- Quick Export Buttons --> <div class="mt-6 pt-6 border-t border-gray-200"> <h4 class="text-lg font-semibold text-gray-900 mb-4">Quick Exports</h4> <div class="grid md:grid-cols-4 gap-3"> <button data-export-type="members" data-export-format="json" class="export-btn flex items-center justify-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors text-sm"> <svg class="w-4 h-4 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path> </svg> <span class="export-text">Members JSON</span> </button> <button data-export-type="boats" data-export-format="json" class="export-btn flex items-center justify-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors text-sm"> <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path> </svg> <span class="export-text">Boats JSON</span> </button> <button data-export-type="complete" data-export-format="json" class="export-btn flex items-center justify-center p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors text-sm"> <svg class="w-4 h-4 text-purple-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path> </svg> <span class="export-text">Complete JSON</span> </button> <button data-export-type="complete" data-export-format="csv" class="export-btn flex items-center justify-center p-3 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors text-sm"> <svg class="w-4 h-4 text-indigo-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path> </svg> <span class="export-text">Complete CSV</span> </button> </div> </div> </div> <!-- Alerts --> ${overdueBoats.length > 0 && renderTemplate`<div class="mb-8 bg-red-50 border border-red-200 rounded-lg p-6"> <h3 class="text-lg font-semibold text-red-900 mb-4">‚ö†Ô∏è Overdue Boats (${overdueBoats.length})</h3> <div class="space-y-2"> ${overdueBoats.map((boat) => renderTemplate`<div class="flex justify-between items-center bg-red-100 p-3 rounded"> <div> <span class="font-semibold">${boat.boat_name}</span> - ${boat.sailor_name} </div> <div class="text-sm text-red-700">
Expected: ${new Date(boat.expected_return).toLocaleString()} </div> </div>`)} </div> </div>`} <!-- Main Dashboard Grid --> <div class="grid lg:grid-cols-2 gap-8"> <!-- Boat Status Overview --> <div class="bg-sail-white rounded-lg p-6 shadow-lg"> <h3 class="text-xl font-bold text-ocean-green mb-6">Boat Status Overview</h3> <div class="space-y-4 max-h-96 overflow-y-auto"> ${boatStatuses.map((boat) => renderTemplate`<div class="border rounded-lg p-4"> <div class="flex justify-between items-start mb-2"> <div> <h4 class="font-semibold">${boat.name}</h4> <p class="text-sm text-gray-600">ID: ${boat.id}</p> ${boat.boat_type && renderTemplate`<p class="text-xs text-gray-500">
Type: ${boat.boat_type === "shared" ? "Shared" : "Individual"} </p>`} </div> <div class="text-right"> <span${addAttribute(`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${boat.status === "operational" ? "bg-green-100 text-green-800" : boat.status === "maintenance" ? "bg-yellow-100 text-yellow-800" : "bg-red-100 text-red-800"}`, "class")}> ${boat.status === "operational" ? "Operational" : boat.status === "maintenance" ? "Maintenance" : "Out of Service"} </span> </div> </div> ${boat.activeCheckIns.length > 0 && renderTemplate`<div class="text-sm text-blue-600"> ${boat.boat_type === "shared" ? renderTemplate`<div> <div class="font-medium mb-1">Active check-ins (${boat.activeCheckIns.length}):</div> ${boat.activeCheckIns.map((checkIn, index) => renderTemplate`<div class="text-xs ml-2 mb-1"> ${checkIn.sailor_name} - Expected back: ${new Date(checkIn.expected_return).toLocaleString()} </div>`)} </div>` : `Currently checked out by: ${boat.activeCheckIns[0].sailor_name}`} </div>`} </div>`)} </div> </div> <!-- Recent Activity --> <div class="bg-sail-white rounded-lg p-6 shadow-lg"> <h3 class="text-xl font-bold text-ocean-green mb-6">Recent Activity</h3> <div class="space-y-3 max-h-96 overflow-y-auto"> ${notifications.map((notification) => renderTemplate`<div class="border-l-4 border-ocean-green pl-4 py-2"> <div class="flex justify-between items-start"> <div class="flex-1"> <p class="text-sm font-medium">${notification.message}</p> <p class="text-xs text-gray-500"> ${new Date(notification.sent_at).toLocaleString()} </p> </div> <span${addAttribute(`px-2 py-1 rounded text-xs ${notification.type === "check_out" ? "bg-blue-100 text-blue-800" : notification.type === "check_in" ? "bg-green-100 text-green-800" : notification.type === "status_change" ? "bg-yellow-100 text-yellow-800" : notification.type === "time_extension" ? "bg-purple-100 text-purple-800" : "bg-gray-100 text-gray-800"}`, "class")}> ${notification.type.replace("_", " ")} </span> </div> </div>`)} </div> </div> </div> <!-- Maintenance Summary --> ${(maintenanceBoats > 0 || outOfServiceBoats > 0) && renderTemplate`<div class="mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6"> <h3 class="text-lg font-semibold text-yellow-900 mb-4">Maintenance Summary</h3> <div class="grid md:grid-cols-2 gap-4"> ${maintenanceBoats > 0 && renderTemplate`<div class="bg-yellow-100 p-4 rounded"> <p class="font-medium text-yellow-900">Boats Under Maintenance: ${maintenanceBoats}</p> <div class="mt-2 space-y-1"> ${boatStatuses.filter((b) => b.status === "maintenance").map((boat) => renderTemplate`<p class="text-sm text-yellow-800">‚Ä¢ ${boat.name}</p>`)} </div> </div>`} ${outOfServiceBoats > 0 && renderTemplate`<div class="bg-red-100 p-4 rounded"> <p class="font-medium text-red-900">Boats Out of Service: ${outOfServiceBoats}</p> <div class="mt-2 space-y-1"> ${boatStatuses.filter((b) => b.status === "out_of_service").map((boat) => renderTemplate`<p class="text-sm text-red-800">‚Ä¢ ${boat.name}</p>`)} </div> </div>`} </div> </div>`} <!-- Notification Management --> <div class="mt-8 bg-gray-50 border border-gray-200 rounded-lg p-6"> <h3 class="text-lg font-semibold text-gray-900 mb-4">Notification Management</h3> <div class="grid md:grid-cols-2 gap-6"> <div> <h4 class="font-medium text-gray-700 mb-3">Current Status</h4> <div id="notification-stats" class="space-y-2"> <div class="flex justify-between"> <span class="text-sm text-gray-600">Total Notifications:</span> <span class="text-sm font-medium" id="total-notifications">Loading...</span> </div> <div class="flex justify-between"> <span class="text-sm text-gray-600">Oldest Notification:</span> <span class="text-sm font-medium" id="oldest-notification">Loading...</span> </div> <div class="flex justify-between"> <span class="text-sm text-gray-600">Newest Notification:</span> <span class="text-sm font-medium" id="newest-notification">Loading...</span> </div> </div> </div> <div> <h4 class="font-medium text-gray-700 mb-3">Cleanup Options</h4> <div class="space-y-3"> <div> <label class="block text-sm text-gray-600 mb-1">Retention Period (days):</label> <select id="retention-days" class="w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ocean-green focus:border-transparent"> <option value="7">7 days</option> <option value="14">14 days</option> <option value="30" selected>30 days</option> <option value="60">60 days</option> <option value="90">90 days</option> </select> </div> <button onclick="cleanupNotifications()" class="w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm">
üóëÔ∏è Cleanup Old Notifications
</button> <p class="text-xs text-gray-500">
This will permanently delete notifications older than the selected retention period.
</p> </div> </div> </div> </div> </div> </section> </main> ${renderScript($$result2, "/Users/noahnicol/Desktop/ymir-sailing-club/src/pages/en/admin-dashboard.astro?astro&type=script&index=0&lang.ts")} ` })}`;
}, "/Users/noahnicol/Desktop/ymir-sailing-club/src/pages/en/admin-dashboard.astro", void 0);

const $$file = "/Users/noahnicol/Desktop/ymir-sailing-club/src/pages/en/admin-dashboard.astro";
const $$url = "/en/admin-dashboard";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$AdminDashboard,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
